const axios = require("axios");
const cheerio = require("cheerio");

const kapaAldebainoJr = async () => {
  const url = "https://www.muitohentai.com";
  const response = await axios.get(url);
  const $ = cheerio.load(response.data);
  const result = [];
  $(".animation-2.items article").each((_, element) => {
    const title = $(element).find(".data > h3").text();
    const date = $(element).find(".data > span").text();
    let link = $(element).find(".poster a").attr("href");
    link = link.includes("http") ? link : `${url}${link}`;
    result.push({ title, date, link });
  });

  return result
    .filter((item) => item.date)
    .reduce(
      (acc, cur) =>
        acc +
        `🎬 *Título*: ${cur.title}\n📅 *Data*: ${cur.date}\n🌍 *Link*: ${cur.link}\n\n`,
      ""
    );
};

module.exports = { kapaAldebainoJr }